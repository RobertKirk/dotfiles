sanitise tridactyllocal tridactylsync

" colour scheme
colors dark

" Comment toggler for Reddit and Hacker News
bind ;c hint -c [class*="expand"],[class="togg"]

" Git{Hub,Lab} git clone via SSH yank
bind yg composite js "git clone " + document.location.href.replace(/https?:\/\//,"git@").replace("/",":").replace(/$/,".git") | clipboard yank

" I like wikiwand but I don't like the way it changes URLs
bindurl wikiwand.com yy composite js document.location.href.replace("wikiwand.com/en","wikipedia.org/wiki") | clipboard yank

" Make gu take you back to subreddit from comments
bindurl reddit.com gu urlparent 4
 
" find mode commands
bind / fillcmdline find
bind ? fillcmdline find -?
bind n findnext 1
bind N findnext -1
bind ,<Space> nohlsearch

" Only hint search results on Google
bindurl www.google.com f hint -Jc .rc > .r > a
bindurl www.google.com F hint -Jtc .rc>.r>a

" Allow Ctrl-a to select all in the commandline
unbind --mode=ex <C-a>

" Let Ctrl-c to copy in the commandline
unbind --mode=ex <C-c>

" Postgres docs search
set searchurls.pg https://www.postgresql.org/search/?u=%2Fdocs%2F10%2F&q=%s

" Pandas docs search (default is bad)
set searchurls.pd https://www.google.com/search?q=site:http://http://pandas.pydata.org/pandas-docs/version/0.24/+%s

" set editorcmd to suckless terminal, or use the defaults on other platforms
js tri.browserBg.runtime.getPlatformInfo().then(os=>{const editorcmd = os.os=="linux" ? "st vim" : "auto"; tri.config.set("editorcmd", editorcmd)})

" Make Tridactyl work on more sites at the expense of some security
set csp clobber
fixamo_quiet

" New reddit is bad
autocmd DocStart www.reddit.com js tri.excmds.urlmodify("-t", "www", "old")

" Mosquito nets won't make themselves
autocmd DocStart www.amazon.co.uk js tri.excmds.urlmodify("-t", "www", "smile")

" vim: set filetype=vim:
